<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>Dashboard Admin - Home</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    html, body { margin: 0; padding: 0; }
    body { font-family: "Segoe UI", Arial, sans-serif; margin: 0; background: #f6f7fb; }
    .header { background: #2376e2; color: #fff; padding: 18px 32px; }
    .header h1 { margin:0; font-size: 2.2em; }
    .header span { font-size:1.1em; opacity:0.93; }
    .container { max-width: 1200px; margin: 24px auto; background: #fff; border-radius: 12px; box-shadow: 0 0 8px #ddd; padding: 24px; }
    .metrics { display: flex; gap: 22px; margin-bottom: 28px; flex-wrap: wrap; }
    .metric { flex:1 1 170px; background: #f4f8ff; border-radius: 10px; padding: 18px 0; min-width: 150px; text-align: center; margin-bottom: 12px;}
    .metric .num { font-size: 2em; font-weight: bold; color: #2376e2; }
    .actions { margin-bottom: 18px; display:flex;flex-wrap:wrap;gap:10px;}
    .actions button { background: #2376e2; color: #fff; border: none; border-radius: 4px; padding: 8px 18px; cursor: pointer; }
    .actions button:hover { background: #1653b7; }
    .analytics-row { display: flex; gap: 24px; flex-wrap: wrap; margin-bottom: 28px;}
    .analytics-col { background: #f9fafc; border-radius: 12px; flex: 1; padding: 16px 16px 0 16px; min-width: 320px; margin-bottom:12px; }
    .analytics-col h4 { margin: 0 0 8px 0; font-size:1.1em;}
    table { width: 100%; border-collapse: collapse; margin-top: 10px; font-size:1em;}
    th, td { border: 1px solid #ececec; padding: 8px 8px; text-align:left;}
    th { background: #f5f5f8; }
    .user-status { font-weight: bold; padding: 2px 8px; border-radius: 5px; }
    .user-status.active { background: #c9f7ce; color: #045d1c; }
    .user-status.inactive { background: #ffd6d6; color: #a80000; }
    .feature-tags { font-size: 0.9em; }
    .feature-tag { background: #eee; border-radius: 3px; margin-right: 4px; padding: 2px 5px; margin-bottom:2px; display:inline-block;}
    .go-detail { background: #fff; color: #2376e2; border: 1px solid #2376e2; border-radius: 4px; padding: 4px 10px; cursor: pointer;}
    .go-detail:hover { background: #2376e2; color: #fff; }
    @media (max-width: 1100px) {
      .container {padding:12px;}
      .analytics-row { flex-direction: column; gap: 8px;}
      .analytics-col { min-width:unset;}
    }
    @media (max-width: 700px) {
      .metrics { flex-direction: column; gap: 10px;}
      .metric {padding: 10px 0;}
      .container {padding:6px;}
      table, th, td { font-size:0.95em;}
    }
    @media (max-width: 600px) {
      .container { max-width: 100vw; border-radius:0; box-shadow:none;}
      .header {padding:12px;}
      .header h1 {font-size:1.2em;}
    }
    .stat-box {border-radius:8px;background:#e8f0fe;padding:7px 12px;display:inline-block;margin-right:9px;font-size:0.96em;}
  </style>
</head>
<body>
  <div class="header">
    <h1>Dashboard Admin</h1>
    <span>Monitoring & Kontrol Perangkat User</span>
  </div>
  <div class="container">
    <div class="metrics">
      <div class="metric">
        <div class="num" id="userCount">8</div>
        <div>Total User Aktif</div>
      </div>
      <div class="metric">
        <div class="num" id="onlineCount">6</div>
        <div>User Online</div>
      </div>
      <div class="metric">
        <div class="num" id="alertCount">2</div>
        <div>Device Alert</div>
      </div>
      <div class="metric">
        <div class="num" id="pendingCommandCount">3</div>
        <div>Command Pending</div>
      </div>
    </div>
    <div class="analytics-row">
      <div class="analytics-col">
        <h4>Aktivitas User (7 Hari)</h4>
        <canvas id="userActivityChart" height="120" style="max-width:100%"></canvas>
        <div class="stat-box">Rata-rata: 5 user/hari</div>
      </div>
      <div class="analytics-col">
        <h4>Distribusi Fitur Aktif</h4>
        <canvas id="featurePieChart" height="120" style="max-width:100%"></canvas>
        <div class="stat-box">Fitur populer: GPS, Kontak, SMS</div>
      </div>
      <div class="analytics-col">
        <h4>User Online per Jam (Hari ini)</h4>
        <canvas id="hourlyOnlineChart" height="120" style="max-width:100%"></canvas>
        <div class="stat-box">Peak: 12 user</div>
      </div>
    </div>
    <div class="actions">
      <button onclick="alert('Tambah user baru!')">+ Tambah User</button>
      <button onclick="alert('Export data!')">Export Data</button>
      <button onclick="alert('Lihat log sistem!')">Log Sistem</button>
    </div>
    <h3>Daftar User</h3>
    <div style="overflow-x:auto;">
    <table>
      <tr>
        <th>Nama</th>
        <th>Nomor HP</th>
        <th>Status</th>
        <th>Last Active</th>
        <th>Fitur Aktif</th>
        <th>Device</th>
        <th>Command</th>
        <th>Aksi</th>
      </tr>
      <tbody id="usersTable"></tbody>
    </table>
    </div>
  </div>
  <script>
    // Dummy user list
    const users = [
      {
        name: "Budi Santoso", phone: "0812xxxx111", status: "active", last: "2025-08-03 08:40", 
        features: ["GPS", "Kontak", "SMS", "Call", "App", "Mic", "Clipboard"],
        device: "Android", command: "Pending", detail: "#"
      },
      {
        name: "Rina Wijaya", phone: "0821xxxx222", status: "active", last: "2025-08-03 08:39", 
        features: ["GPS", "Kontak", "App"], device: "Android", command: "OK", detail: "#"
      },
      {
        name: "Hendra", phone: "0856xxxx333", status: "inactive", last: "2025-08-02 20:10", 
        features: ["GPS", "Kontak"], device: "Android", command: "-", detail: "#"
      },
      {
        name: "Siti Aminah", phone: "0877xxxx444", status: "active", last: "2025-08-03 08:35", 
        features: ["GPS", "Kontak", "SMS", "Clipboard", "Notif"], device: "Android", command: "Pending", detail: "#"
      }
    ];
    function renderUserTable() {
      document.getElementById('usersTable').innerHTML = users.map(u => `
        <tr>
          <td>${u.name}</td>
          <td>${u.phone}</td>
          <td><span class="user-status ${u.status}">${u.status === "active" ? "Aktif" : "Nonaktif"}</span></td>
          <td>${u.last}</td>
          <td class="feature-tags">${u.features.map(f=>`<span class="feature-tag">${f}</span>`).join('')}</td>
          <td>${u.device}</td>
          <td>${u.command}</td>
          <td><button class="go-detail" onclick="alert('Lihat detail user & monitoring!')">Detail</button></td>
        </tr>
      `).join('');
    }
    renderUserTable();

    // --- ANALYTICS: Chart.js ---
    // Aktivitas User Mingguan (dummy)
    const activityLabels = ["Senin", "Selasa", "Rabu", "Kamis", "Jumat", "Sabtu", "Minggu"];
    const activityData = [3, 5, 4, 6, 8, 7, 6];
    new Chart(document.getElementById('userActivityChart').getContext('2d'), {
      type: 'line',
      data: {
        labels: activityLabels,
        datasets: [{
          label: 'User Aktif/Hari',
          data: activityData,
          borderColor: '#2376e2',
          backgroundColor: 'rgba(35,118,226,0.12)',
          fill: true,
          tension: 0.42,
          pointRadius: 4,
        }]
      },
      options: { plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true,suggestedMax:10}} }
    });

    // Pie Chart Fitur Aktif
    const allFeatures = users.flatMap(u=>u.features);
    const featCount = {};
    allFeatures.forEach(f => featCount[f] = (featCount[f]||0)+1);
    new Chart(document.getElementById('featurePieChart').getContext('2d'), {
      type: 'pie',
      data: {
        labels: Object.keys(featCount),
        datasets: [{
          data: Object.values(featCount),
          backgroundColor: [
            "#2376e2","#46b3e6","#f7b801","#e44a3c","#54e346","#eec643","#8e44ad"
          ]
        }]
      },
      options: { plugins:{legend:{position:'bottom'}} }
    });

    // Online per jam (dummy data)
    const hours = Array.from({length: 12}, (_,i) => (8+i)+":00");
    const online = [2, 3, 6, 8, 10, 12, 8, 7, 6, 7, 5, 3];
    new Chart(document.getElementById('hourlyOnlineChart').getContext('2d'), {
      type: 'bar',
      data: {
        labels: hours,
        datasets: [{
          label: 'User Online',
          data: online,
          backgroundColor: '#2376e2bb',
          borderRadius: 8,
        }]
      },
      options: { plugins:{legend:{display:false}}, scales:{y:{beginAtZero:true,suggestedMax:14}} }
    });
  </script>
</body>
</html>